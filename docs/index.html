<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="pandoc" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <title>Hello! OpenAI Code Agent</title>
    <style>
      code {
        white-space: pre-wrap;
      }
      span.smallcaps {
        font-variant: small-caps;
      }
      div.columns {
        display: flex;
        gap: min(4vw, 1.5em);
      }
      div.column {
        flex: auto;
        overflow-x: auto;
      }
      div.hanging-indent {
        margin-left: 1.5em;
        text-indent: -1.5em;
      }
      /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
      ul.task-list[class] {
        list-style: none;
      }
      ul.task-list li input[type='checkbox'] {
        font-size: inherit;
        width: 0.8em;
        margin: 0 0.8em 0.2em -1.6em;
        vertical-align: middle;
      }
      .display.math {
        display: block;
        text-align: center;
        margin: 0.5rem auto;
      }
      /* CSS for syntax highlighting */
      html {
        -webkit-text-size-adjust: 100%;
      }
      pre > code.sourceCode {
        white-space: pre;
        position: relative;
      }
      pre > code.sourceCode > span {
        display: inline-block;
        line-height: 1.25;
      }
      pre > code.sourceCode > span:empty {
        height: 1.2em;
      }
      .sourceCode {
        overflow: visible;
      }
      code.sourceCode > span {
        color: inherit;
        text-decoration: inherit;
      }
      div.sourceCode {
        margin: 1em 0;
      }
      pre.sourceCode {
        margin: 0;
      }
      @media screen {
        div.sourceCode {
          overflow: auto;
        }
      }
      @media print {
        pre > code.sourceCode {
          white-space: pre-wrap;
        }
        pre > code.sourceCode > span {
          text-indent: -5em;
          padding-left: 5em;
        }
      }
      pre.numberSource code {
        counter-reset: source-line 0;
      }
      pre.numberSource code > span {
        position: relative;
        left: -4em;
        counter-increment: source-line;
      }
      pre.numberSource code > span > a:first-child::before {
        content: counter(source-line);
        position: relative;
        left: -1em;
        text-align: right;
        vertical-align: baseline;
        border: none;
        display: inline-block;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        padding: 0 4px;
        width: 4em;
        color: #aaaaaa;
      }
      pre.numberSource {
        margin-left: 3em;
        border-left: 1px solid #aaaaaa;
        padding-left: 4px;
      }
      div.sourceCode {
      }
      @media screen {
        pre > code.sourceCode > span > a:first-child::before {
          text-decoration: underline;
        }
      }
      code span.al {
        color: #ff0000;
        font-weight: bold;
      } /* Alert */
      code span.an {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Annotation */
      code span.at {
        color: #7d9029;
      } /* Attribute */
      code span.bn {
        color: #40a070;
      } /* BaseN */
      code span.bu {
        color: #008000;
      } /* BuiltIn */
      code span.cf {
        color: #007020;
        font-weight: bold;
      } /* ControlFlow */
      code span.ch {
        color: #4070a0;
      } /* Char */
      code span.cn {
        color: #880000;
      } /* Constant */
      code span.co {
        color: #60a0b0;
        font-style: italic;
      } /* Comment */
      code span.cv {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* CommentVar */
      code span.do {
        color: #ba2121;
        font-style: italic;
      } /* Documentation */
      code span.dt {
        color: #902000;
      } /* DataType */
      code span.dv {
        color: #40a070;
      } /* DecVal */
      code span.er {
        color: #ff0000;
        font-weight: bold;
      } /* Error */
      code span.ex {
      } /* Extension */
      code span.fl {
        color: #40a070;
      } /* Float */
      code span.fu {
        color: #06287e;
      } /* Function */
      code span.im {
        color: #008000;
        font-weight: bold;
      } /* Import */
      code span.in {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Information */
      code span.kw {
        color: #007020;
        font-weight: bold;
      } /* Keyword */
      code span.op {
        color: #666666;
      } /* Operator */
      code span.ot {
        color: #007020;
      } /* Other */
      code span.pp {
        color: #bc7a00;
      } /* Preprocessor */
      code span.sc {
        color: #4070a0;
      } /* SpecialChar */
      code span.ss {
        color: #bb6688;
      } /* SpecialString */
      code span.st {
        color: #4070a0;
      } /* String */
      code span.va {
        color: #19177c;
      } /* Variable */
      code span.vs {
        color: #4070a0;
      } /* VerbatimString */
      code span.wa {
        color: #60a0b0;
        font-weight: bold;
        font-style: italic;
      } /* Warning */
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.8.1/github-markdown.min.css" />
  </head>
  <body>
    <header id="title-block-header">
      <h1 class="title">Hello! OpenAI Code Agent</h1>
    </header>
    <h1 id="hello-openai-code-agent">Hello! OpenAI Code Agent</h1>
    <p>
      <a
        href="https://github.com/SamYuan1990/OpenAI_CodeAgent/actions/workflows/linter.yml"
        ><img
          src="https://github.com/SamYuan1990/OpenAI_CodeAgent/actions/workflows/linter.yml/badge.svg"
          alt="Lint Codebase"
      /></a>
      <a
        href="https://github.com/SamYuan1990/OpenAI_CodeAgent/actions/workflows/ci.yml"
        ><img
          src="https://github.com/SamYuan1990/OpenAI_CodeAgent/actions/workflows/ci.yml/badge.svg"
          alt="Continuous Integration"
      /></a>
    </p>
    <p><a href="./README_zh.md">中文文档</a></p>
    <h2 id="scenarios-features">Scenarios &amp; Features</h2>
    <p>
      This project integrates source code and tool-generated reports (e.g., test
      results, security scans) into Large Language Models (LLMs) to enable
      intelligent analysis without RAG or fine-tuning. The capability is
      embedded into CI/CD pipelines.
    </p>
    <table>
      <colgroup>
        <col style="width: 10%" />
        <col style="width: 14%" />
        <col style="width: 12%" />
        <col style="width: 20%" />
        <col style="width: 24%" />
        <col style="width: 17%" />
      </colgroup>
      <thead>
        <tr>
          <th><strong>Category</strong></th>
          <th><strong>Tools</strong></th>
          <th><strong>Purpose</strong></th>
          <th><strong>Report Content</strong></th>
          <th><strong>Relation to Source Code</strong></th>
          <th><strong>Actions on Issues</strong></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Unit Testing</strong></td>
          <td>JUnit, pytest, Mocha</td>
          <td>Validate module logic</td>
          <td>Pass rate, failed cases, code coverage</td>
          <td>Directly linked to test classes and modules</td>
          <td>Fix failed tests, improve coverage</td>
        </tr>
        <tr>
          <td><strong>Static Analysis</strong></td>
          <td>ESLint, Pylint, SonarQube</td>
          <td>Check style &amp; defects</td>
          <td>Code smells, complexity, duplication</td>
          <td>Directly linked to code files and line numbers</td>
          <td>Refactor code, enforce standards</td>
        </tr>
        <tr>
          <td><strong>Dependency Scan</strong></td>
          <td>Snyk, OWASP Dependency-Check</td>
          <td>Detect third-party risks</td>
          <td>CVEs, severity, affected versions</td>
          <td>Linked to config files (e.g., <code>pom.xml</code>)</td>
          <td>Upgrade dependencies, apply fixes</td>
        </tr>
        <tr>
          <td><strong>Security Scan</strong></td>
          <td>OWASP ZAP, SonarQube</td>
          <td>Find vulnerabilities</td>
          <td>Vulnerability types, locations</td>
          <td>Directly linked to code files and line numbers</td>
          <td>Patch code, rescan</td>
        </tr>
      </tbody>
    </table>
    <h3 id="supported-scenarios">Supported Scenarios</h3>
    <table>
      <colgroup>
        <col style="width: 16%" />
        <col style="width: 7%" />
        <col style="width: 8%" />
        <col style="width: 32%" />
        <col style="width: 34%" />
      </colgroup>
      <thead>
        <tr>
          <th>Category</th>
          <th>Tools</th>
          <th>Language/Target</th>
          <th>Scenario</th>
          <th>Example</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Unit Test</strong></td>
          <td>Jest</td>
          <td>JavaScript</td>
          <td>Auto-generate unit tests to improve coverage</td>
          <td>
            <a href="./.github/workflows/ExampleJSunittestGenerate.yml">Link</a>
          </td>
        </tr>
        <tr>
          <td><strong>Doc Gen</strong></td>
          <td></td>
          <td>Go</td>
          <td>Generate GoDoc comments via AST analysis</td>
          <td>
            <a href="./.github/workflows/ExampleGODocGenerate.yml">Link</a>
          </td>
        </tr>
        <tr>
          <td><strong>CVE Scan</strong></td>
          <td>Syft, Bomber</td>
          <td>deployment.yaml</td>
          <td>Detect CVEs and suggest Pod Security Policy improvements</td>
          <td>
            <a href="./.github/workflows/ExampleCVEToDeployment.yml">Link</a>
          </td>
        </tr>
        <tr>
          <td><strong>Code Vulnerabilities Scan</strong></td>
          <td></td>
          <td>C</td>
          <td>Detect common CVE reasons as null pointer for code</td>
          <td>
            <a href="./.github/workflows/ExampleCVulnerabilitiesscan.yml"
              >Link</a
            >
          </td>
        </tr>
      </tbody>
    </table>
    <h2 id="collaboration">Collaboration</h2>
    <p>
      Workflow Design:<br />
      <img src="./Design.png" alt="OverAllDesign" />
    </p>
    <p>
      <strong>Contribution Guidelines</strong>:<br />
      To add language support, provide:
    </p>
    <ul class="task-list">
      <li>
        <label><input type="checkbox" />AST scanning tool adaptation</label>
      </li>
      <li>
        <label><input type="checkbox" />LLM output filtering rules</label>
      </li>
    </ul>
    <hr />
    <h2 id="non-functional-metrics">Non-Functional Metrics</h2>
    <h3 id="loop-control">Loop Control</h3>
    <p>
      Set <code>maxIterations</code> for AST tasks or enable
      <code>dry run</code> mode.
    </p>
    <h3 id="logging-archiving">Logging &amp; Archiving</h3>
    <ul>
      <li>Hash-based tracing (SHA256 of final prompt).</li>
    </ul>
    <h3 id="metrics">Metrics</h3>
    <ul class="task-list">
      <li>
        <label><input type="checkbox" checked="" />Per-task tracing</label>
      </li>
      <li>
        <label><input type="checkbox" checked="" />Token cost analysis</label>
      </li>
      <li>
        <label
          ><input type="checkbox" checked="" />Prompt component analysis (e.g.,
          one-shot vs. ReAct)</label
        >
      </li>
      <li>
        <label
          ><input type="checkbox" />Output effectiveness (filtered invalid
          responses)</label
        >
      </li>
    </ul>
    <hr />
    <h2 id="output-examples">Output Examples</h2>
    <table>
      <thead>
        <tr>
          <th>Field</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>avg_prompt_precent</td>
          <td>Average percentage of user intent in prompts</td>
        </tr>
        <tr>
          <td>avg_content_precent</td>
          <td>Average percentage of task context in prompts</td>
        </tr>
        <tr>
          <td>LLMresponse</td>
          <td>Raw LLM response (single call)</td>
        </tr>
        <tr>
          <td>final_prompt</td>
          <td>Full prompt sent to LLM</td>
        </tr>
        <tr>
          <td>avg_time_usage</td>
          <td>Average time spend when invoke LLM</td>
        </tr>
        <tr>
          <td>avg_inputToken</td>
          <td>Average input token to LLM</td>
        </tr>
        <tr>
          <td>avg_outputToken</td>
          <td>Average output token from LLM</td>
        </tr>
      </tbody>
    </table>
    <p>AST task output (directory: <code>./GenAI_output</code>):</p>
    <div class="sourceCode" id="cb1">
      <pre
        class="sourceCode json"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;model&quot;</span><span class="fu">:</span> <span class="st">&quot;deepseek-chat&quot;</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;final_prompt&quot;</span><span class="fu">:</span> <span class="st">&quot;...&quot;</span><span class="fu">,</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;hashValue&quot;</span><span class="fu">:</span> <span class="st">&quot;600e13336953ff55998a56a86644a01abfabe33513abcf01b8d945c61664e0c2&quot;</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;response&quot;</span><span class="fu">:</span> <span class="st">&quot;&quot;</span><span class="fu">,</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;prompt_precent&quot;</span><span class="fu">:</span> <span class="fl">12.71</span><span class="fu">,</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;content_precent&quot;</span><span class="fu">:</span> <span class="fl">87.03</span><span class="fu">,</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;meta&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;filename&quot;</span><span class="fu">:</span> <span class="st">&quot;src/aiagent.js&quot;</span><span class="fu">,</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;functionname&quot;</span><span class="fu">:</span> <span class="st">&quot;calculatePercentage&quot;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre>
    </div>
    <h2 id="current-result">Current result</h2>
    <table>
      <colgroup>
        <col style="width: 25%" />
        <col style="width: 25%" />
        <col style="width: 25%" />
        <col style="width: 25%" />
      </colgroup>
      <thead>
        <tr>
          <th>Metric</th>
          <th>Document generate</th>
          <th>Deployment suggestion</th>
          <th>Code enhancement</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Prompt percent</td>
          <td>16%</td>
          <td>5.6%</td>
          <td>54.2%</td>
        </tr>
        <tr>
          <td>Content percent</td>
          <td>83%</td>
          <td>93%</td>
          <td>45%</td>
        </tr>
        <tr>
          <td>Output Token</td>
          <td>430</td>
          <td>1207</td>
          <td>742</td>
        </tr>
        <tr>
          <td>LLM response time(second)</td>
          <td>26</td>
          <td>61</td>
          <td>43</td>
        </tr>
      </tbody>
    </table>
    <hr />
    <h2 id="usage-tips">Usage Tips</h2>
    <ul>
      <li>
        <p>
          <strong>Ethical AI</strong>: Submit LLM-generated changes via GitHub
          Issues or branches for review.
        </p>
      </li>
      <li>
        <p><strong>Local Run</strong>:</p>
        <div class="sourceCode" id="cb2">
          <pre
            class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npx</span> local-action . src/main.js .env.example</span></code></pre>
        </div>
        <p>or container</p>
        <div class="sourceCode" id="cb3">
          <pre
            class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> run <span class="at">-e</span> baseURL=<span class="st">&quot;https://api.deepseek.com&quot;</span> <span class="dt">\</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> apiKey=<span class="st">&quot;dummy&quot;</span> <span class="dt">\</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> model=<span class="st">&quot;deep-seek&quot;</span> <span class="dt">\</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> dirPath=<span class="st">&quot;/workdir/src&quot;</span> <span class="dt">\</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> dryRun=<span class="st">&quot;true&quot;</span> <span class="dt">\</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> runType=<span class="st">&quot;jsunittest&quot;</span> <span class="dt">\</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> maxIterations=1 <span class="dt">\</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> deploymentfile= <span class="dt">\</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> prompt= <span class="dt">\</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> output_path= <span class="dt">\</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> githubIssueReport= <span class="dt">\</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> token= <span class="dt">\</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">-e</span> GITHUB_REPOSITORY= <span class="dt">\</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">-v</span> <span class="st">&quot;</span><span class="va">$(</span><span class="bu">pwd</span><span class="va">)</span><span class="st">&quot;</span>:/workdir <span class="dt">\</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>         ghcr.io/samyuan1990/openai_codeagent-action:latest</span></code></pre>
        </div>
      </li>
    </ul>
    <hr />
    <h2 id="pre-release-checks">Pre-Release Checks</h2>
    <ol type="1">
      <li>Scan this repo for unit test generation</li>
      <li>Scan KubeEdge for doc generation</li>
      <li>Scan Kepler for CVE detection</li>
    </ol>
    <hr />
    <h2 id="roadmap">Roadmap</h2>
    <ul>
      <li>Enhance unit test generation</li>
      <li>Add function/file-level skip rules</li>
      <li>Framework flexibility improvements</li>
    </ul>
  </body>
</html>
